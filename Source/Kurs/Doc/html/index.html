<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Diplom: Program for modeling motion of waves on the surface of an ideal incompressible fluid by an incomplete approximation of minimal residual.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Diplom</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Program for modeling motion of waves on the surface of an ideal incompressible fluid by an incomplete approximation of minimal residual. </div>  </div>
</div>
<div class="contents">
<div class="textblock"><dl class="author"><dt><b>Author:</b></dt><dd>Erthalion <a href="mailto:9erthalion6@gmail.com">9erthalion6@gmail.com</a></dd></dl>
<p>There is three general object - solver for linear equations,solver for nonlinear equations and comparer (for comparison linear and nonlinear equations). Now to change calculation parameters, is necessary to change them in main.cpp code, or create before start: </p>
<div class="fragment"><pre class="fragment"> <span class="keywordflow">if</span>(argc != 10)
   {
       printf(<span class="stringliteral">&quot;insert 10 param\n&quot;</span>);
       <span class="keywordflow">return</span> -1;
   }
 <a class="code" href="classAlgLin.html" title="Class for calculation linear equation of shallow water.">AlgLin</a> *A=<span class="keyword">new</span> <a class="code" href="classAlgLin.html" title="Class for calculation linear equation of shallow water.">AlgLin</a>(atof(argv[1]),atof(argv[2]),atoi(argv[3]),atoi(argv[4]),atof(argv[5]),argv[6],atoi(argv[7]),atof(argv[8]));
 A-&gt;<a class="code" href="classAlg.html#ad75df7e9510a1d765fdac3ab774144fb" title="Main calculation loop by time.">solve</a>(atoi(argv[9]));
</pre></div><p>There is example of start nonlinear solver: </p>
<div class="fragment"><pre class="fragment"> <a class="code" href="classAlgNonlin.html" title="Class for calculation nonlinear equation of shallow water.">AlgNonlin</a> *A=<span class="keyword">new</span> <a class="code" href="classAlgNonlin.html" title="Class for calculation nonlinear equation of shallow water.">AlgNonlin</a>(1,1,30,30,0.0000001,(<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;out_nonlin.dat&quot;</span>,100,0.01);
 A-&gt;<a class="code" href="classAlg.html#ad75df7e9510a1d765fdac3ab774144fb" title="Main calculation loop by time.">solve</a>(3);
</pre></div><p>There is example of start comparer: </p>
<div class="fragment"><pre class="fragment"> <a class="code" href="classComparer.html" title="Class to comparison of data files.">Comparer</a> *cmp=<span class="keyword">new</span> <a class="code" href="classComparer.html" title="Class to comparison of data files.">Comparer</a>(50,50,1.0/(50-1),1.0/(50-1),80);
 cmp-&gt;<a class="code" href="classComparer.html#a7e557fdd48f24aa1f916660f314c4428" title="Function to comparison.">delta</a>((<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;out_nonlin.dat&quot;</span>,(<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;out_lin.dat&quot;</span>,(<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;delta.dat&quot;</span>);
</pre></div><p>Main calculation process accompanied by printing thread, which displays all debugging information.</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>this is unix thread,not crossplatform; to use on windows,should be removed all lines of code with pthread</dd></dl>
<p>We use two ways to build the project: </p>
<ul>
<li>
Compile with CMake. See Build/CMakeList.txt </li>
<li>
Compile with own script for Profile-guided optimization (until do not understand, how to implement is in CMake). See Build/make.sh. This script has one parameter to choise mode of compilation - 1 to collect profile statistic, 2 to compile with using exist statistic (general mode). </li>
</ul>
<p>Usage second way: </p>
<div class="fragment"><pre class="fragment"> ./make.sh 1
 then
 ./make.sh 2
</pre></div><dl class="warning"><dt><b>Warning:</b></dt><dd>compile whith make.sh in first mode only short-time calculation because it slowly!</dd></dl>
<p>Optimization flags of gcc are used in the CMakeList.txt and make.sh: </p>
<div class="fragment"><pre class="fragment"> -o3 -march=native -funsafe-math-optimizations -fomit-frame-pointer -fno-stack-protector -finline-small-functions -fprefetch-loop-arrays -funsafe-loop-optimizations -funroll-loops -std=c++0x -mpreferred-stack-boundary=6 -ftracer
</pre></div><p>In the CMakeList.txt defined two compilation type - Release and Debug. To choise:</p>
<div class="fragment"><pre class="fragment">  cmake -DCMAKE_BUILD_TYPE=Release ./
  make
</pre></div><dl class="note"><dt><b>Note:</b></dt><dd>The code has OpenMP pragmas - parallelization of program has not yer completed. It is not effective with this pragmas (not compile with -fopenmp)</dd></dl>
<p>Actual version of program is available in the repository <a href="http://code.google.com/p/erthalion-nm/">http://code.google.com/p/erthalion-nm/</a> </p>
</div></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue Jun 5 2012 22:03:35 for Diplom by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
